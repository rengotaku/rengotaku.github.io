<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>オレオレLINUX便利コマンド | Vegetable Programing</title>

<meta name="keywords" content="shellscript, まとめ, ベジプロ, プログ, プログラム" />
<meta name="description" content="今週のタスクの確認 git log --since=&quot;date -v-7d &#43;&#39;%Y-%m-%d 00:00:00&#39;&quot; --oneline | grep -v &#39;Merge&#39; | cut -c 9- 指定形式のブランチを取得し操作する for i in `git branch -r| grep &quot;develop_v3.1.0&quot;`; do echo $i; done 現在のブランチにローカルブランチが">
<meta name="author" content="">
<link rel="canonical" href="https://rengotaku.github.io/posts/a361c59d-6392-4a1d-bda4-f0f13c2d3e98/" />
<link href="https://rengotaku.github.io/assets/css/stylesheet.min.08d6f2005b6ce4ed10207916c0411c66e66f2201e3f7a56e8fb2ccbc4a8b259c.css" integrity="sha256-CNbyAFts5O0QIHkWwEEcZuZvIgHj96Vuj7LMvEqLJZw=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://rengotaku.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://rengotaku.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://rengotaku.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://rengotaku.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://rengotaku.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.68.3" />



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-109045589-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta property="og:title" content="オレオレLINUX便利コマンド" />
<meta property="og:description" content="今週のタスクの確認 git log --since=&quot;date -v-7d &#43;&#39;%Y-%m-%d 00:00:00&#39;&quot; --oneline | grep -v &#39;Merge&#39; | cut -c 9- 指定形式のブランチを取得し操作する for i in `git branch -r| grep &quot;develop_v3.1.0&quot;`; do echo $i; done 現在のブランチにローカルブランチが" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rengotaku.github.io/posts/a361c59d-6392-4a1d-bda4-f0f13c2d3e98/" />
<meta property="article:published_time" content="2018-04-19T10:17:27+09:00" />
<meta property="article:modified_time" content="2020-07-09T09:46:28+09:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="オレオレLINUX便利コマンド"/>
<meta name="twitter:description" content="今週のタスクの確認 git log --since=&quot;date -v-7d &#43;&#39;%Y-%m-%d 00:00:00&#39;&quot; --oneline | grep -v &#39;Merge&#39; | cut -c 9- 指定形式のブランチを取得し操作する for i in `git branch -r| grep &quot;develop_v3.1.0&quot;`; do echo $i; done 現在のブランチにローカルブランチが"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "オレオレLINUX便利コマンド",
  "name": "オレオレLINUX便利コマンド",
  "description": "今週のタスクの確認 git log --since=\u0026amp;quot;date -v-7d +\u0026#39;%Y-%m-%d 00:00:00\u0026#39;\u0026amp;quot; --oneline | grep -v \u0026#39;Merge\u0026#39; | cut -c 9- 指定形式のブランチを取得し操作する for i in `git branch -r| grep …",
  "keywords": [
    "shellscript", "まとめ", "ベジプロ", "プログ", "プログラム"
  ],
  "articleBody": "今週のタスクの確認 git log --since=\"date -v-7d +'%Y-%m-%d 00:00:00'\" --oneline | grep -v 'Merge' | cut -c 9-\r指定形式のブランチを取得し操作する for i in `git branch -r| grep \"develop_v3.1.0\"`; do echo $i; done\r現在のブランチにローカルブランチがマージされているか。(gmergechk) for i in `git branch | egrep -v '\\*|develop$|staging$|release$|master$'`; do echo -e \"\\e[33m${i}\\e[m\"; git log --oneline | grep $i | sed -e 's/^/ /g'; done;\rSSHコンフィグのホスト名を検索(sshg) cat ~/.ssh/config | grep \"Host \" | grep\rファイルの先頭のみにする $ (rm -f hoge.txt \u0026\u0026 head  hoge.txt) 対象のファイルの先頭行のみにする $ for i in `ls *.txt`; do (rm -f $i \u0026\u0026 head  $i) ファイルを書き込む権限がない場合 $ for i in `ls *.txt`; do head $i | sudo tee $i; done\rlinux - コマンドラインで読み込んだファイルに上書きするには - スタック・オーバーフロー\n各フォルダ配下にあるファイルより上位○位を表示する $ for i in `ls -d /path/to/directory_*`; do echo $i; ls -l $i | grep -vE '^total' | sort -k 5,5gr | head -5; done\r下記のようなフォルダ構成で使える\nroot/\r├ import_a/\r│　├ test1.csv/\r│　└ test2.csv/\r├ import_b/\r│　├ test1.csv/\r│　└ test2.csv/\r├ import_c/\r│　├ test1.csv/\r│　└ test2.csv/\r複数のファイルから、grepしいい感じに表示 export TF=\"/path/to/target\" TW=\"the word of grep\" HD=15; for FILENAME in `ls -r $TF | head -$HD `; do echo -e \"\\e[32m${FILENAME}\\e[m\"; grep $TW ${FILENAME} | sed -e 's/^/\\t/' ; done\rfilename\rgrep word\rgrep word\rgrep word\rfilename\rgrep word\rgrep word\rgrep word\r.\r.\r.\rssh-agentのプロセス使用順にソートして一覧表示 $ ps aux | grep ssh-agen[t] | cut -d' ' -f1 | sort | uniq -c | sort -nr\r？？？\r１日以内に更新されたファイル一覧 $ sudo find ./ -mtime -1 | grep \"/path/to/folder\"\r./path/to/folder/xxxx\r./path/to/folder/xxxx\rフォルダ内のファイルの行数を一覧化 $ for file in `ls test.*`; do wc -l $file; done\r101 test.20181020\r106 test.20181021\r105 test.20181022\r104 test.20181023\rraiseのtestを失敗するまで実行する $ while true; do echo \"start `date`\"; `rm -f log/test.log log/output.log \u0026\u0026 bundle exec rake test  log/output.log 2\u00261`; if [ 0 -ne $? ]; then echo \"end `date`\"; break; fi done\rstart Thu Feb 21 18:13:03 JST 2019\rstart Thu Feb 21 18:13:27 JST 2019\rstart Thu Feb 21 18:13:44 JST 2019\rstart Thu Feb 21 18:13:59 JST 2019\rstart Thu Feb 21 18:14:15 JST 2019\rstart Thu Feb 21 18:14:30 JST 2019\rstart Thu Feb 21 18:14:46 JST 2019\rend Thu Feb 21 18:15:01 JST 2019\r log/test.log には実行のログ、 log/output.log には標準出力が蓄積される。テストを行う度にリセットされる  各フォルダ内のファイル数を一覧化 for dir in `ls -ld /path/to/dir/* | cut -d' ' -f10`; do echo $dir; echo \" `ls -A $dir | wc -l`\"; done\r/path/to/dir/child_dir1\r15\r/path/to/dir/child_dir2\r20\rファイル一覧を縦並びで閲覧したい $ ls -l | tr -s ' ' | cut -f10 -d' '\rApplications\rDesktop\rDocuments\rDownloads\rLibrary\rMovies\rMusic\rPictures\rPublic\r$ ll\rtotal 16\rdrwx------@ 5 300807 AD\\Domain Users 160B 2 12 17:12 Applications\rdrwx------+ 6 300807 AD\\Domain Users 192B 5 22 18:13 Desktop\rdrwx------+ 12 300807 AD\\Domain Users 384B 1 9 12:08 Documents\rdrwx------+ 167 300807 AD\\Domain Users 5.2K 5 23 18:23 Downloads\rdrwx------@ 65 300807 AD\\Domain Users 2.0K 3 15 16:34 Library\rdrwx------+ 3 300807 AD\\Domain Users 96B 4 2 2018 Movies\rdrwx------+ 3 300807 AD\\Domain Users 96B 4 2 2018 Music\rdrwx------+ 3 300807 AD\\Domain Users 96B 4 2 2018 Pictures\rdrwxr-xr-x+ 4 300807 AD\\Domain Users 128B 4 2 2018 Public\r linux - How to output only file names (with spaces) in ls -Al? - Unix \u0026 Linux Stack Exchange\n gitプロジェクトを全て最新にする $ for i in `ls`; do cd $i \u0026\u0026 git checkout master \u0026\u0026 git pull \u0026\u0026 cd ../ ; done\r$ for i in `ls`; do cd $i \u0026\u0026 git checkout master \u0026\u0026 git pull; cd ../ ; done\rAlready on 'master'\rYour branch is up to date with 'origin/master'.\rerror: pathspec 'master' did not match any file(s) known to git.\rAlready on 'master'\rYour branch is up to date with 'origin/master'.\rremote: Enumerating objects: 12, done.\rremote: Counting objects: 100% (12/12), done.\rremote: Total 24 (delta 12), reused 12 (delta 12), pack-reused 12\rUnpacking objects: 100% (24/24), done.\rFrom github.com:hogehoge/hoge-repository\r* [new branch] development - origin/development\r.\r.\r.\r数値付きフォルダを数値順でソート sortコマンドについて詳しくまとめました 【Linuxコマンド集】\n$ ls -d hoge.jsond.* | sort -t. -k 3 -n\rhoge.jsond.1\rhoge.jsond.2\rhoge.jsond.3\rhoge.jsond.4\rhoge.jsond.5\rhoge.jsond.6\rhoge.jsond.7\rhoge.jsond.8\rhoge.jsond.9\rhoge.jsond.10\rhoge.jsond.11\rhoge.jsond.12\r.\r.\r.\r$ ls -d hoge.jsond.* | sort -t. -k 3 -n\rhoge.jsond.1 hoge.jsond.23 hoge.jsond.37 hoge.jsond.50 hoge.jsond.64\rhoge.jsond.10 hoge.jsond.24 hoge.jsond.38 hoge.jsond.51 hoge.jsond.65\rhoge.jsond.11 hoge.jsond.25 hoge.jsond.39 hoge.jsond.52 hoge.jsond.66\rhoge.jsond.12 hoge.jsond.26 hoge.jsond.4 hoge.jsond.53 hoge.jsond.67\rhoge.jsond.13 hoge.jsond.27 hoge.jsond.40 hoge.jsond.54 hoge.jsond.68\rhoge.jsond.14 hoge.jsond.28 hoge.jsond.41 hoge.jsond.55 hoge.jsond.69\rhoge.jsond.15 hoge.jsond.29 hoge.jsond.42 hoge.jsond.56 hoge.jsond.7\rhoge.jsond.16 hoge.jsond.3 hoge.jsond.43 hoge.jsond.57 hoge.jsond.70\rhoge.jsond.17 hoge.jsond.30 hoge.jsond.44 hoge.jsond.58 hoge.jsond.71\rhoge.jsond.18 hoge.jsond.31 hoge.jsond.45 hoge.jsond.59 hoge.jsond.72\rhoge.jsond.19 hoge.jsond.32 hoge.jsond.46 hoge.jsond.6 hoge.jsond.8\rhoge.jsond.2 hoge.jsond.33 hoge.jsond.47 hoge.jsond.60 hoge.jsond.9\rhoge.jsond.20 hoge.jsond.34 hoge.jsond.48 hoge.jsond.61\rhoge.jsond.21 hoge.jsond.35 hoge.jsond.49 hoge.jsond.62\rhoge.jsond.22 hoge.jsond.36 hoge.jsond.5 hoge.jsond.63\rパスワード生成 $ cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 16 | head -1\rP7xe5xHgdamKEWuV\rファイルの特定の範囲の行を抽出 sed -n '2,4p' $ printf \"1\\n2\\n3\\n4\\n5\\n6\\n7\" | sed -n '2,4p'\r2\r3\r4\r shell - Bash tool to get nth line from a file - Stack Overflow\n 現在のブランチで修正したspecのみテストを実行したい echo $(git diff origin/master `git branch | grep '*' | cut -d' ' -f2` | grep 'diff --git' | sed -E 's#diff --git a\\/(.+) b\\/.+#\\1#' | grep spec) | { read FILES; bundle exec rspec $FILES; }\rフロー  ブランチをmasterと比較 差分よりspecファイルだけ取得 rspecを対象ファイル指定して実行  ハッシュ値を取得したい $ echo $(sha1sum `date +\"%s%6N\"`|sed 's/ -//')\r Bash, how to hash value of a string? - Stack Overflow\n  linux - Command to get time in milliseconds - Stack Overflow\n rspecを何回も実行する read HASH $(echo $(sha1sum `date +\"%s%6N\"`|sed 's/ -//')); HASHFILE=/tmp/$HASH; for i in `seq 10`; do bundle exec rspec  $HASHFILE 2\u00261; if [[ $? != 0 ]]; then echo \"$i: ○\"; else echo \"$i: ×\"; fi; done; echo \"read results $HASHFILE\"\rローディング状態を再現 function spinner() {\rPID=$1\ri=1\rsp=\"/-\\|\"\recho -n ' '\rwhile ps a | awk '{print $1}' | grep -q \"${PID}\";\rdo\rprintf \"\\b${sp:i++%${#sp}:1}\"\rsleep 1\rdone\recho -n ' '\r}\rUsage sleep 5 \u0026\rspinner $!\r参考 Display Spinner while waiting for some process to finish\n",
  "wordCount" : "1514",
  "inLanguage": "en",
  "datePublished": "2018-04-19T10:17:27+09:00",
  "dateModified": "2020-07-09T09:46:28+09:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://rengotaku.github.io/posts/a361c59d-6392-4a1d-bda4-f0f13c2d3e98/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Vegetable Programing",
    "logo": {
      "@type": "ImageObject",
      "url": "https://rengotaku.github.io/favicon.ico"
    }
  }
}
</script>



</head>

<body class="single" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://rengotaku.github.io/" accesskey="h">Vegetable Programing</a>
            <span class="logo-switches">
                <span class="theme-toggle">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://rengotaku.github.io/about/">
                    <span>
                        about me
                    </span>
                </a>
            </li>
            <li>
                <a href="https://rengotaku.github.io/archive/">
                    <span>
                        archive
                    </span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      オレオレLINUX便利コマンド
    </h1>
    <div class="post-meta">April 19, 2018

    </div>
  </header> 

  <div class="post-content">
<h1 id="今週のタスクの確認">今週のタスクの確認<a hidden class="anchor" aria-hidden="true" href="#今週のタスクの確認">#</a></h1>
<pre><code>git log --since=&quot;date -v-7d +'%Y-%m-%d 00:00:00'&quot; --oneline | grep -v 'Merge' | cut -c 9-
</code></pre><h1 id="指定形式のブランチを取得し操作する">指定形式のブランチを取得し操作する<a hidden class="anchor" aria-hidden="true" href="#指定形式のブランチを取得し操作する">#</a></h1>
<pre><code>for i in `git branch -r| grep &quot;develop_v3.1.0&quot;`; do echo $i; done
</code></pre><h1 id="現在のブランチにローカルブランチがマージされているかgmergechk">現在のブランチにローカルブランチがマージされているか。(gmergechk)<a hidden class="anchor" aria-hidden="true" href="#現在のブランチにローカルブランチがマージされているかgmergechk">#</a></h1>
<pre><code>for i in `git branch | egrep -v '\*|develop$|staging$|release$|master$'`; do echo -e &quot;\e[33m${i}\e[m&quot;; git log --oneline | grep $i | sed -e 's/^/  /g'; done;
</code></pre><h1 id="sshコンフィグのホスト名を検索sshg">SSHコンフィグのホスト名を検索(sshg)<a hidden class="anchor" aria-hidden="true" href="#sshコンフィグのホスト名を検索sshg">#</a></h1>
<pre><code>cat ~/.ssh/config | grep &quot;Host &quot; | grep
</code></pre><h1 id="ファイルの先頭のみにする">ファイルの先頭のみにする<a hidden class="anchor" aria-hidden="true" href="#ファイルの先頭のみにする">#</a></h1>
<pre><code>$ (rm -f hoge.txt &amp;&amp; head &gt; hoge.txt) &lt; hoge.txt
</code></pre><h2 id="対象のファイルの先頭行のみにする">対象のファイルの先頭行のみにする<a hidden class="anchor" aria-hidden="true" href="#対象のファイルの先頭行のみにする">#</a></h2>
<pre><code>$ for i in `ls *.txt`; do (rm -f $i &amp;&amp; head &gt; $i) &lt; $i; done
</code></pre><h2 id="ファイルを書き込む権限がない場合">ファイルを書き込む権限がない場合<a hidden class="anchor" aria-hidden="true" href="#ファイルを書き込む権限がない場合">#</a></h2>
<pre><code>$ for i in `ls *.txt`; do head $i | sudo tee $i; done
</code></pre><p><a href="https://ja.stackoverflow.com/questions/35012/%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%A7%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%93%E3%81%A0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E4%B8%8A%E6%9B%B8%E3%81%8D%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF">linux - コマンドラインで読み込んだファイルに上書きするには - スタック・オーバーフロー</a></p>
<h1 id="各フォルダ配下にあるファイルより上位位を表示する">各フォルダ配下にあるファイルより上位○位を表示する<a hidden class="anchor" aria-hidden="true" href="#各フォルダ配下にあるファイルより上位位を表示する">#</a></h1>
<pre><code>$ for i in `ls -d /path/to/directory_*`; do echo $i; ls -l $i | grep -vE '^total' | sort -k 5,5gr | head -5; done
</code></pre><p>下記のようなフォルダ構成で使える</p>
<pre><code>root/
　├ import_a/
　│　├ test1.csv/
　│　└ test2.csv/
　├ import_b/
　│　├ test1.csv/
　│　└ test2.csv/
　├ import_c/
　│　├ test1.csv/
　│　└ test2.csv/
</code></pre><h1 id="複数のファイルからgrepしいい感じに表示">複数のファイルから、grepしいい感じに表示<a hidden class="anchor" aria-hidden="true" href="#複数のファイルからgrepしいい感じに表示">#</a></h1>
<pre><code>export TF=&quot;/path/to/target&quot; TW=&quot;the word of grep&quot; HD=15; for FILENAME in `ls -r $TF | head -$HD `; do echo -e &quot;\e[32m${FILENAME}\e[m&quot;; grep $TW ${FILENAME} | sed -e 's/^/\t/' ; done
</code></pre><pre><code class="language-:結果" data-lang=":結果">filename
	grep word
	grep word
	grep word
filename
	grep word
	grep word
	grep word
.
.
.
</code></pre><h1 id="ssh-agentのプロセス使用順にソートして一覧表示">ssh-agentのプロセス使用順にソートして一覧表示<a hidden class="anchor" aria-hidden="true" href="#ssh-agentのプロセス使用順にソートして一覧表示">#</a></h1>
<pre><code>$ ps aux | grep ssh-agen[t] | cut -d' ' -f1 | sort | uniq -c | sort -nr
</code></pre><pre><code class="language-:結果" data-lang=":結果">？？？
</code></pre><h1 id="１日以内に更新されたファイル一覧">１日以内に更新されたファイル一覧<a hidden class="anchor" aria-hidden="true" href="#１日以内に更新されたファイル一覧">#</a></h1>
<pre><code>$ sudo find ./ -mtime -1 | grep &quot;/path/to/folder&quot;
</code></pre><pre><code class="language-:結果" data-lang=":結果">./path/to/folder/xxxx
./path/to/folder/xxxx
</code></pre><h1 id="フォルダ内のファイルの行数を一覧化">フォルダ内のファイルの行数を一覧化<a hidden class="anchor" aria-hidden="true" href="#フォルダ内のファイルの行数を一覧化">#</a></h1>
<pre><code>$ for file in `ls test.*`; do wc -l $file; done
</code></pre><pre><code class="language-:結果" data-lang=":結果">101 test.20181020
106 test.20181021
105 test.20181022
104 test.20181023
</code></pre><h1 id="raiseのtestを失敗するまで実行する">raiseのtestを失敗するまで実行する<a hidden class="anchor" aria-hidden="true" href="#raiseのtestを失敗するまで実行する">#</a></h1>
<pre><code>$ while true; do echo &quot;start `date`&quot;; `rm -f log/test.log log/output.log &amp;&amp; bundle exec rake test &gt; log/output.log 2&gt;&amp;1`; if [ 0 -ne $? ]; then echo &quot;end `date`&quot;;  break; fi done
</code></pre><pre><code class="language-:結果" data-lang=":結果">start Thu Feb 21 18:13:03 JST 2019
start Thu Feb 21 18:13:27 JST 2019
start Thu Feb 21 18:13:44 JST 2019
start Thu Feb 21 18:13:59 JST 2019
start Thu Feb 21 18:14:15 JST 2019
start Thu Feb 21 18:14:30 JST 2019
start Thu Feb 21 18:14:46 JST 2019
end Thu Feb 21 18:15:01 JST 2019
</code></pre><ul>
<li><code>log/test.log</code> には実行のログ、 <code>log/output.log</code> には標準出力が蓄積される。テストを行う度にリセットされる</li>
</ul>
<h1 id="各フォルダ内のファイル数を一覧化">各フォルダ内のファイル数を一覧化<a hidden class="anchor" aria-hidden="true" href="#各フォルダ内のファイル数を一覧化">#</a></h1>
<pre><code>for dir in `ls -ld /path/to/dir/* | cut -d' ' -f10`; do echo $dir; echo &quot;  `ls -A $dir | wc -l`&quot;; done
</code></pre><pre><code class="language-:結果" data-lang=":結果">/path/to/dir/child_dir1
  15
/path/to/dir/child_dir2
  20
</code></pre><h1 id="ファイル一覧を縦並びで閲覧したい">ファイル一覧を縦並びで閲覧したい<a hidden class="anchor" aria-hidden="true" href="#ファイル一覧を縦並びで閲覧したい">#</a></h1>
<pre><code>$ ls -l | tr -s ' ' | cut -f10 -d' '
</code></pre><pre><code class="language-:結果" data-lang=":結果">
Applications
Desktop
Documents
Downloads
Library
Movies
Music
Pictures
Public
</code></pre><pre><code class="language-:通常" data-lang=":通常">$ ll
total 16
drwx------@   5 300807  AD\Domain Users   160B  2 12 17:12 Applications
drwx------+   6 300807  AD\Domain Users   192B  5 22 18:13 Desktop
drwx------+  12 300807  AD\Domain Users   384B  1  9 12:08 Documents
drwx------+ 167 300807  AD\Domain Users   5.2K  5 23 18:23 Downloads
drwx------@  65 300807  AD\Domain Users   2.0K  3 15 16:34 Library
drwx------+   3 300807  AD\Domain Users    96B  4  2  2018 Movies
drwx------+   3 300807  AD\Domain Users    96B  4  2  2018 Music
drwx------+   3 300807  AD\Domain Users    96B  4  2  2018 Pictures
drwxr-xr-x+   4 300807  AD\Domain Users   128B  4  2  2018 Public
</code></pre><blockquote>
<p><a href="https://unix.stackexchange.com/questions/70614/how-to-output-only-file-names-with-spaces-in-ls-al">linux - How to output only file names (with spaces) in ls -Al? - Unix &amp; Linux Stack Exchange</a></p>
</blockquote>
<h1 id="gitプロジェクトを全て最新にする">gitプロジェクトを全て最新にする<a hidden class="anchor" aria-hidden="true" href="#gitプロジェクトを全て最新にする">#</a></h1>
<pre><code>$ for i in `ls`; do cd $i &amp;&amp; git checkout master &amp;&amp; git pull &amp;&amp; cd ../ ; done
</code></pre><pre><code class="language-:結果" data-lang=":結果">$ for i in `ls`; do cd $i &amp;&amp; git checkout master &amp;&amp; git pull; cd ../ ; done
Already on 'master'
Your branch is up to date with 'origin/master'.
error: pathspec 'master' did not match any file(s) known to git.
Already on 'master'
Your branch is up to date with 'origin/master'.
remote: Enumerating objects: 12, done.
remote: Counting objects: 100% (12/12), done.
remote: Total 24 (delta 12), reused 12 (delta 12), pack-reused 12
Unpacking objects: 100% (24/24), done.
From github.com:hogehoge/hoge-repository
 * [new branch]      development -&gt; origin/development
.
.
.
</code></pre><h1 id="数値付きフォルダを数値順でソート">数値付きフォルダを数値順でソート<a hidden class="anchor" aria-hidden="true" href="#数値付きフォルダを数値順でソート">#</a></h1>
<p><a href="https://eng-entrance.com/linux-command-sort">sortコマンドについて詳しくまとめました 【Linuxコマンド集】</a></p>
<pre><code>$ ls -d hoge.jsond.* | sort -t. -k 3 -n
</code></pre><pre><code class="language-:結果" data-lang=":結果">hoge.jsond.1
hoge.jsond.2
hoge.jsond.3
hoge.jsond.4
hoge.jsond.5
hoge.jsond.6
hoge.jsond.7
hoge.jsond.8
hoge.jsond.9
hoge.jsond.10
hoge.jsond.11
hoge.jsond.12
.
.
.
</code></pre><pre><code class="language-:通常" data-lang=":通常">$ ls -d hoge.jsond.* | sort -t. -k 3 -n
hoge.jsond.1   hoge.jsond.23  hoge.jsond.37  hoge.jsond.50  hoge.jsond.64
hoge.jsond.10  hoge.jsond.24  hoge.jsond.38  hoge.jsond.51  hoge.jsond.65
hoge.jsond.11  hoge.jsond.25  hoge.jsond.39  hoge.jsond.52  hoge.jsond.66
hoge.jsond.12  hoge.jsond.26  hoge.jsond.4   hoge.jsond.53  hoge.jsond.67
hoge.jsond.13  hoge.jsond.27  hoge.jsond.40  hoge.jsond.54  hoge.jsond.68
hoge.jsond.14  hoge.jsond.28  hoge.jsond.41  hoge.jsond.55  hoge.jsond.69
hoge.jsond.15  hoge.jsond.29  hoge.jsond.42  hoge.jsond.56  hoge.jsond.7
hoge.jsond.16  hoge.jsond.3   hoge.jsond.43  hoge.jsond.57  hoge.jsond.70
hoge.jsond.17  hoge.jsond.30  hoge.jsond.44  hoge.jsond.58  hoge.jsond.71
hoge.jsond.18  hoge.jsond.31  hoge.jsond.45  hoge.jsond.59  hoge.jsond.72
hoge.jsond.19  hoge.jsond.32  hoge.jsond.46  hoge.jsond.6   hoge.jsond.8
hoge.jsond.2   hoge.jsond.33  hoge.jsond.47  hoge.jsond.60  hoge.jsond.9
hoge.jsond.20  hoge.jsond.34  hoge.jsond.48  hoge.jsond.61
hoge.jsond.21  hoge.jsond.35  hoge.jsond.49  hoge.jsond.62
hoge.jsond.22  hoge.jsond.36  hoge.jsond.5   hoge.jsond.63
</code></pre><h1 id="パスワード生成">パスワード生成<a hidden class="anchor" aria-hidden="true" href="#パスワード生成">#</a></h1>
<pre><code>$ cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 16 | head -1
</code></pre><pre><code class="language-:結果" data-lang=":結果">P7xe5xHgdamKEWuV
</code></pre><h1 id="ファイルの特定の範囲の行を抽出">ファイルの特定の範囲の行を抽出<a hidden class="anchor" aria-hidden="true" href="#ファイルの特定の範囲の行を抽出">#</a></h1>
<pre><code>sed -n '2,4p' &lt; file.txt
</code></pre><pre><code class="language-:結果" data-lang=":結果">$ printf &quot;1\n2\n3\n4\n5\n6\n7&quot; | sed -n '2,4p'
2
3
4
</code></pre><blockquote>
<p><a href="https://stackoverflow.com/questions/6022384/bash-tool-to-get-nth-line-from-a-file">shell - Bash tool to get nth line from a file - Stack Overflow</a></p>
</blockquote>
<h1 id="現在のブランチで修正したspecのみテストを実行したい">現在のブランチで修正したspecのみテストを実行したい<a hidden class="anchor" aria-hidden="true" href="#現在のブランチで修正したspecのみテストを実行したい">#</a></h1>
<pre><code>echo $(git diff origin/master `git branch | grep '*' | cut -d' ' -f2` | grep 'diff --git' | sed -E 's#diff --git a\/(.+) b\/.+#\1#' | grep spec) | { read FILES; bundle exec rspec $FILES; }
</code></pre><h2 id="フロー">フロー<a hidden class="anchor" aria-hidden="true" href="#フロー">#</a></h2>
<ul>
<li>ブランチをmasterと比較</li>
<li>差分よりspecファイルだけ取得</li>
<li>rspecを対象ファイル指定して実行</li>
</ul>
<h1 id="ハッシュ値を取得したい">ハッシュ値を取得したい<a hidden class="anchor" aria-hidden="true" href="#ハッシュ値を取得したい">#</a></h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ echo <span style="color:#66d9ef">$(</span>sha1sum <span style="color:#f92672">&lt;&lt;&lt;</span><span style="color:#e6db74">`</span>date +<span style="color:#e6db74">&#34;%s%6N&#34;</span><span style="color:#e6db74">`</span>|sed <span style="color:#e6db74">&#39;s/ -//&#39;</span><span style="color:#66d9ef">)</span>
</code></pre></div><blockquote>
<p><a href="https://stackoverflow.com/questions/28844492/bash-how-to-hash-value-of-a-string">Bash, how to hash value of a string? - Stack Overflow</a></p>
</blockquote>
<blockquote>
<p><a href="https://stackoverflow.com/questions/16548528/command-to-get-time-in-milliseconds">linux - Command to get time in milliseconds - Stack Overflow</a></p>
</blockquote>
<h1 id="rspecを何回も実行する">rspecを何回も実行する<a hidden class="anchor" aria-hidden="true" href="#rspecを何回も実行する">#</a></h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">read HASH <span style="color:#f92672">&lt;&lt;&lt;</span><span style="color:#66d9ef">$(</span>echo <span style="color:#66d9ef">$(</span>sha1sum <span style="color:#f92672">&lt;&lt;&lt;</span><span style="color:#e6db74">`</span>date +<span style="color:#e6db74">&#34;%s%6N&#34;</span><span style="color:#e6db74">`</span>|sed <span style="color:#e6db74">&#39;s/ -//&#39;</span><span style="color:#66d9ef">))</span>; HASHFILE<span style="color:#f92672">=</span>/tmp/$HASH; <span style="color:#66d9ef">for</span> i in <span style="color:#e6db74">`</span>seq 10<span style="color:#e6db74">`</span>; <span style="color:#66d9ef">do</span> bundle exec rspec &gt;&gt; $HASHFILE 2&gt;&amp;1; <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $? !<span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span> echo <span style="color:#e6db74">&#34;</span>$i<span style="color:#e6db74">: ○&#34;</span>; <span style="color:#66d9ef">else</span> echo <span style="color:#e6db74">&#34;</span>$i<span style="color:#e6db74">: ×&#34;</span>; <span style="color:#66d9ef">fi</span>; <span style="color:#66d9ef">done</span>; echo <span style="color:#e6db74">&#34;read results </span>$HASHFILE<span style="color:#e6db74">&#34;</span>
</code></pre></div><h1 id="ローディング状態を再現">ローディング状態を再現<a hidden class="anchor" aria-hidden="true" href="#ローディング状態を再現">#</a></h1>
<pre><code>function spinner() {
  PID=$1
  i=1
  sp=&quot;/-\|&quot;
  echo -n ' '
  while ps a | awk '{print $1}' | grep -q &quot;${PID}&quot;;
  do
    printf &quot;\b${sp:i++%${#sp}:1}&quot;
    sleep 1
  done
  echo -n ' '
}
</code></pre><h2 id="usage">Usage<a hidden class="anchor" aria-hidden="true" href="#usage">#</a></h2>
<pre><code>sleep 5 &amp;
spinner $!
</code></pre><h2 id="参考">参考<a hidden class="anchor" aria-hidden="true" href="#参考">#</a></h2>
<p><a href="https://unix.stackexchange.com/a/225183/421784">Display Spinner while waiting for some process to finish</a></p>

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://rengotaku.github.io/tags/shellscript">shellscript</a></li>
      <li><a href="https://rengotaku.github.io/tags/%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li>
    </ul>
  </footer>
</article>
    </main><footer class="footer">
    <span>©2018-2020 Vegetable Programing.</span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top" accesskey="g">
    <button class="top-link" id="top-link" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
            <path d="M12 6H0l6-6z" /></svg>
    </button>
</a>



<script defer src="https://rengotaku.github.io/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                behavior: "smooth"
            });
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
