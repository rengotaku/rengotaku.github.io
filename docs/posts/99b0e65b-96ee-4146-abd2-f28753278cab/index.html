<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>KUSANAGIでSSL証明書の取得ができない | Vegetable Programing</title>

<meta name="keywords" content="letsencrypt, ベジプロ, プログ, プログラム" />
<meta name="description" content="事象 # kusanagi ssl --email hogehoge@gmail.com Saving debug log to /var/log/letsencrypt/letsencrypt.log Plugins selected: Authenticator webroot, Installer None Obtaining a new certificate Performing the following challenges: http-01 challenge for my-site.com Using the webroot path /home/kusanagi/WordPress/DocumentRoot for all unmatched domains. Waiting for verification... Challenge failed for domain my-site.com http-01 challenge for my-site.com Cleaning up challenges Some challenges have failed. IMPORTANT NOTES: - The following errors were reported by the server: Domain:">
<meta name="author" content="">
<link rel="canonical" href="https://www.vegetable.blog.v41.me/posts/99b0e65b-96ee-4146-abd2-f28753278cab/" />
<link href="https://www.vegetable.blog.v41.me/assets/css/stylesheet.min.08d6f2005b6ce4ed10207916c0411c66e66f2201e3f7a56e8fb2ccbc4a8b259c.css" integrity="sha256-CNbyAFts5O0QIHkWwEEcZuZvIgHj96Vuj7LMvEqLJZw=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://www.vegetable.blog.v41.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.vegetable.blog.v41.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.vegetable.blog.v41.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.vegetable.blog.v41.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.vegetable.blog.v41.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.68.3" />



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-109045589-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta property="og:title" content="KUSANAGIでSSL証明書の取得ができない" />
<meta property="og:description" content="事象 # kusanagi ssl --email hogehoge@gmail.com Saving debug log to /var/log/letsencrypt/letsencrypt.log Plugins selected: Authenticator webroot, Installer None Obtaining a new certificate Performing the following challenges: http-01 challenge for my-site.com Using the webroot path /home/kusanagi/WordPress/DocumentRoot for all unmatched domains. Waiting for verification... Challenge failed for domain my-site.com http-01 challenge for my-site.com Cleaning up challenges Some challenges have failed. IMPORTANT NOTES: - The following errors were reported by the server: Domain:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.vegetable.blog.v41.me/posts/99b0e65b-96ee-4146-abd2-f28753278cab/" />
<meta property="article:published_time" content="2019-03-18T22:09:23+09:00" />
<meta property="article:modified_time" content="2019-03-19T11:13:51+09:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="KUSANAGIでSSL証明書の取得ができない"/>
<meta name="twitter:description" content="事象 # kusanagi ssl --email hogehoge@gmail.com Saving debug log to /var/log/letsencrypt/letsencrypt.log Plugins selected: Authenticator webroot, Installer None Obtaining a new certificate Performing the following challenges: http-01 challenge for my-site.com Using the webroot path /home/kusanagi/WordPress/DocumentRoot for all unmatched domains. Waiting for verification... Challenge failed for domain my-site.com http-01 challenge for my-site.com Cleaning up challenges Some challenges have failed. IMPORTANT NOTES: - The following errors were reported by the server: Domain:"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "KUSANAGIでSSL証明書の取得ができない",
  "name": "KUSANAGIでSSL証明書の取得ができない",
  "description": "事象 # kusanagi ssl --email hogehoge@gmail.com Saving debug log to /var/log/letsencrypt/letsencrypt.log Plugins selected: Authenticator webroot, Installer None Obtaining a new …",
  "keywords": [
    "letsencrypt", "ベジプロ", "プログ", "プログラム"
  ],
  "articleBody": "事象 # kusanagi ssl --email hogehoge@gmail.com\rSaving debug log to /var/log/letsencrypt/letsencrypt.log\rPlugins selected: Authenticator webroot, Installer None\rObtaining a new certificate\rPerforming the following challenges:\rhttp-01 challenge for my-site.com\rUsing the webroot path /home/kusanagi/WordPress/DocumentRoot for all unmatched domains.\rWaiting for verification...\rChallenge failed for domain my-site.com\rhttp-01 challenge for my-site.com\rCleaning up challenges\rSome challenges have failed.\rIMPORTANT NOTES:\r- The following errors were reported by the server:\rDomain: my-site.com\rType: connection\rDetail: unknownHost :: No valid IP addresses found for\rmy-site.com\rTo fix these errors, please make sure that your domain name was\rentered correctly and the DNS A/AAAA record(s) for that domain\rcontain(s) the right IP address. Additionally, please check that\ryour computer has a publicly routable IP address and that no\rfirewalls are preventing the server from communicating with the\rclient. If you're using the webroot plugin, you should also verify\rthat you are serving files from the webroot path you provided.\rCannot get Let\\'s Encrypt SSL Certificate files.\r失敗しました。\r KUSANAGIでSSL証明書が更新されなくて無理矢理更新した件 | 経験知\n 後述のDNSを修正する方がよい\r対応 DNSに下記を設定する\nタイプ: A\r名称: @\rTTL: 3600\r値: サーバーIP\r ＠IT：DNS Tips：“www”の付かないURLアドレスの設定方法は？\n 結果 # kusanagi ssl --email hogehoge@gmail.com\rSaving debug log to /var/log/letsencrypt/letsencrypt.log\rPlugins selected: Authenticator webroot, Installer None\rObtaining a new certificate\rPerforming the following challenges:\rhttp-01 challenge for my-site.com\rUsing the webroot path /home/kusanagi/WordPress/DocumentRoot for all unmatched domains.\rWaiting for verification...\rCleaning up challenges\rIMPORTANT NOTES:\r- Congratulations! Your certificate and chain have been saved at:\r/etc/letsencrypt/live/my-site.com/fullchain.pem\rYour key file has been saved at:\r/etc/letsencrypt/live/my-site.com/privkey.pem\rYour cert will expire on 2019-06-16. To obtain a new or tweaked\rversion of this certificate in the future, simply run certbot-auto\ragain. To non-interactively renew *all* of your certificates, run\r\"certbot-auto renew\"\r- If you like Certbot, please consider supporting our work by:\rDonating to ISRG / Let's Encrypt: https://letsencrypt.org/donate\rDonating to EFF: https://eff.org/donate-le\r証明書の自動更新を有効にします\rnginx/httpd の設定を変更し、再起動しました。\r完了しました。\r新しいメールが /var/spool/mail/root にあります\rトラブルシューティング FQDNの値を確認したい場合\n[WordPress]\rPROFILE=\"WordPress\"\rKUSANAGI_TYPE=\"WordPress\"\rKUSANAGI_FQDN=\"xxx\"\rKUSANAGI_DIR=\"/home/kusanagi/WordPress\"\rKUSANAGI_DBNAME=\"xxx\"\rKUSANAGI_DBUSER=\"xxx\"\rKUSANAGI_DBPASS=\"xxx\"\rWPLANG=\"ja\"\rOPT_WOO=\"\"\rKUSANAGI_MARIADB=\"yes\"\rKUSANAGI_PSQL=\"no\"\r KUSANAGIでブログをHTTPS化するときに発生するエラーの対処法 | みやの宝箱\n ",
  "wordCount" : "540",
  "inLanguage": "en",
  "datePublished": "2019-03-18T22:09:23+09:00",
  "dateModified": "2019-03-19T11:13:51+09:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.vegetable.blog.v41.me/posts/99b0e65b-96ee-4146-abd2-f28753278cab/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Vegetable Programing",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.vegetable.blog.v41.me/favicon.ico"
    }
  }
}
</script>



</head>

<body class="single" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.vegetable.blog.v41.me" accesskey="h">Vegetable Programing</a>
            <span class="logo-switches">
                <span class="theme-toggle">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://www.vegetable.blog.v41.me/about/">
                    <span>
                        about me
                    </span>
                </a>
            </li>
            <li>
                <a href="https://www.vegetable.blog.v41.me/archive/">
                    <span>
                        archive
                    </span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      KUSANAGIでSSL証明書の取得ができない
    </h1>
    <div class="post-meta">March 18, 2019

    </div>
  </header> 

  <div class="post-content">
<h1 id="事象">事象<a hidden class="anchor" aria-hidden="true" href="#事象">#</a></h1>
<pre><code># kusanagi ssl --email hogehoge@gmail.com
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator webroot, Installer None
Obtaining a new certificate
Performing the following challenges:
http-01 challenge for my-site.com
Using the webroot path /home/kusanagi/WordPress/DocumentRoot for all unmatched domains.
Waiting for verification...
Challenge failed for domain my-site.com
http-01 challenge for my-site.com
Cleaning up challenges
Some challenges have failed.

IMPORTANT NOTES:
 - The following errors were reported by the server:

   Domain: my-site.com
   Type:   connection
   Detail: unknownHost :: No valid IP addresses found for
   my-site.com

   To fix these errors, please make sure that your domain name was
   entered correctly and the DNS A/AAAA record(s) for that domain
   contain(s) the right IP address. Additionally, please check that
   your computer has a publicly routable IP address and that no
   firewalls are preventing the server from communicating with the
   client. If you're using the webroot plugin, you should also verify
   that you are serving files from the webroot path you provided.
Cannot get Let\'s Encrypt SSL Certificate files.
失敗しました。
</code></pre><blockquote>
<p><a href="https://keikenchi.com/kusanagi-forcibly-update-the-ssl-certificate">KUSANAGIでSSL証明書が更新されなくて無理矢理更新した件 | 経験知</a></p>
</blockquote>
<pre><code class="language-!" data-lang="!">後述のDNSを修正する方がよい
</code></pre><h1 id="対応">対応<a hidden class="anchor" aria-hidden="true" href="#対応">#</a></h1>
<p>DNSに下記を設定する</p>
<pre><code>タイプ: A
名称: @
TTL: 3600
値: サーバーIP
</code></pre><blockquote>
<p><a href="https://www.atmarkit.co.jp/fnetwork/dnstips/034.html">＠IT：DNS Tips：“www”の付かないURLアドレスの設定方法は？</a></p>
</blockquote>
<h1 id="結果">結果<a hidden class="anchor" aria-hidden="true" href="#結果">#</a></h1>
<pre><code># kusanagi ssl --email hogehoge@gmail.com
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator webroot, Installer None
Obtaining a new certificate
Performing the following challenges:
http-01 challenge for my-site.com
Using the webroot path /home/kusanagi/WordPress/DocumentRoot for all unmatched domains.
Waiting for verification...
Cleaning up challenges

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/my-site.com/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/my-site.com/privkey.pem
   Your cert will expire on 2019-06-16. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot-auto
   again. To non-interactively renew *all* of your certificates, run
   &quot;certbot-auto renew&quot;
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le

証明書の自動更新を有効にします
nginx/httpd の設定を変更し、再起動しました。
完了しました。
新しいメールが /var/spool/mail/root にあります
</code></pre><h2 id="トラブルシューティング">トラブルシューティング<a hidden class="anchor" aria-hidden="true" href="#トラブルシューティング">#</a></h2>
<p>FQDNの値を確認したい場合</p>
<pre><code class="language-:/etc/kusanagi.d/profile.conf" data-lang=":/etc/kusanagi.d/profile.conf">[WordPress]
PROFILE=&quot;WordPress&quot;
KUSANAGI_TYPE=&quot;WordPress&quot;
KUSANAGI_FQDN=&quot;xxx&quot;
KUSANAGI_DIR=&quot;/home/kusanagi/WordPress&quot;
KUSANAGI_DBNAME=&quot;xxx&quot;
KUSANAGI_DBUSER=&quot;xxx&quot;
KUSANAGI_DBPASS=&quot;xxx&quot;
WPLANG=&quot;ja&quot;
OPT_WOO=&quot;&quot;
KUSANAGI_MARIADB=&quot;yes&quot;
KUSANAGI_PSQL=&quot;no&quot;
</code></pre><blockquote>
<p><a href="https://miyatore.com/archives/3136">KUSANAGIでブログをHTTPS化するときに発生するエラーの対処法 | みやの宝箱</a></p>
</blockquote>

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.vegetable.blog.v41.me/tags/letsencrypt">letsencrypt</a></li>
    </ul>
  </footer>
</article>
    </main><footer class="footer">
    <span>©2018-2020 Vegetable Programing.</span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top" accesskey="g">
    <button class="top-link" id="top-link" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
            <path d="M12 6H0l6-6z" /></svg>
    </button>
</a>



<script defer src="https://www.vegetable.blog.v41.me/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                behavior: "smooth"
            });
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
