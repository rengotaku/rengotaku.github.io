<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Vegetable Programing</title>

<meta name="keywords" content="" />
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="https://rengotaku.github.io/" />
<link href="https://rengotaku.github.io/assets/css/stylesheet.min.e855f825213afc7aacdf334a190f4ccef15ec9f889837b681633bd7ab2d3f3d8.css" integrity="sha256-6FX4JSE6/Hqs3zNKGQ9MzvFeyfiJg3toFjO9erLT89g=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://rengotaku.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://rengotaku.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://rengotaku.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://rengotaku.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://rengotaku.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />
<link rel="alternate" type="application/rss&#43;xml" href="https://rengotaku.github.io/index.xml">



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-109045589-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta property="og:title" content="Vegetable Programing" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://rengotaku.github.io/" />
<meta property="og:updated_time" content="2021-05-15T21:11:27+09:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Vegetable Programing"/>
<meta name="twitter:description" content=""/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Vegetable Programing",
  "url": "https://rengotaku.github.io/",
  "description": "",
  "thumbnailUrl": "https://rengotaku.github.io/favicon.ico",
  "sameAs": [
      
  ]
}
</script>


</head>

<body class="list home" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://rengotaku.github.io/" accesskey="h">Vegetable Programing</a>
            <span class="logo-switches">
                <span class="theme-toggle">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://rengotaku.github.io/about/">
                    <span>
                        about me
                    </span>
                </a>
            </li>
            <li>
                <a href="https://rengotaku.github.io/archive/">
                    <span>
                        archive
                    </span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main"> 



<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      factory botでユニークな値を設定
    </h2>
  </header>
  <section class="entry-content">
    <p>sequence(:username) { |n| &#34;user#{n}&#34; } FactoryBot.define do factory :user do first_name &#39;John&#39; last_name &#39;Doe&#39; birthdate { 21.years.ago } admin false sequence(:username) { |n| &#34;user#{n}&#34; } end end Factory Bot cheatsheet...</p>
  </section>
  <footer class="entry-footer">June 26, 2019
</footer>
  <a class="entry-link" aria-label="post link to factory botでユニークな値を設定" href="https://rengotaku.github.io/posts/9b22bf01-bb92-4598-93a2-bd78d7efe635/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      mockの使い方
    </h2>
  </header>
  <section class="entry-content">
    <p>基本 mock = Minitest::Mock.new.expect(:method_name, &#39;return_value&#39;, [&#39;param1&#39;, &#39;param2&#39;]) mock.method_name(&#39;param1&#39;, &#39;param2&#39;) # &lt;= return value is &#39;return_value&#39; mock.verify # &lt;= true 第一のメソッド名、第二の戻り値までは必須 応用 入れ子 mock2 = Minitest::Mock.new.expect(:second, &#39;second value&#39;) mock1 = Minitest::Mock.new.expect(:first, mock2) mock1.first.second #&lt;= &#39;second value&#39; stubと組み合わせる class...</p>
  </section>
  <footer class="entry-footer">June 26, 2019
</footer>
  <a class="entry-link" aria-label="post link to mockの使い方" href="https://rengotaku.github.io/posts/333de691-10b6-4078-94a2-75b176921114/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      CircleCIでif文内で複数の処理を行う際に途中で失敗してもパスしてしまう
    </h2>
  </header>
  <section class="entry-content">
    <p>事象 下記の場合だと、 decrypt1.sh 、 decrypt2.sh で失敗だったとしても、 decrypt3.sh が成功すればパスしてしまう。 if [ &#34;$CIRCLE_BRANCH&#34; = &#34;master&#34; ]; then ./decrypt1.sh ./decrypt2.sh ./decrypt3.sh fi 修正 &amp;&amp; で連結して成功した場合のみ次のステ...</p>
  </section>
  <footer class="entry-footer">June 21, 2019
</footer>
  <a class="entry-link" aria-label="post link to CircleCIでif文内で複数の処理を行う際に途中で失敗してもパスしてしまう" href="https://rengotaku.github.io/posts/4fb84bda-ee4a-483c-91d5-36d05bdbe114/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      rubocop_todo.ymlのルールが適用されない
    </h2>
  </header>
  <section class="entry-content">
    <p>解決 してない。 複数のルールをマージする機能がないと実現しないが、その機能は外されたらしい。 バージョン $ rubocop -v 0.64.0 事象 inherit_from: .rubocop_1.yml AllCops: Exclude: - b.rb AllCops: Exclude: - a.rb 上記の場...</p>
  </section>
  <footer class="entry-footer">June 14, 2019
</footer>
  <a class="entry-link" aria-label="post link to rubocop_todo.ymlのルールが適用されない" href="https://rengotaku.github.io/posts/efae8a3a-e6f1-4c30-ac6d-262d4cf9e026/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      DynamoDBでバックアップよりリストアしたい際に必要なポリシー
    </h2>
  </header>
  <section class="entry-content">
    <p>{ &#34;Version&#34;: &#34;2012-10-17&#34;, &#34;Statement&#34;: [ { &#34;Sid&#34;: &#34;VisualEditor0&#34;, &#34;Effect&#34;: &#34;Allow&#34;, &#34;Action&#34;: [ &#34;dynamodb:Scan&#34;, &#34;dynamodb:Query&#34;, &#34;dynamodb:UpdateItem&#34;, &#34;dynamodb:PutItem&#34;, &#34;dynamodb:GetItem&#34;, &#34;dynamodb:DeleteItem&#34;, &#34;dynamodb:BatchWriteItem&#34;, &#34;dynamodb:ListTables&#34;, &#34;dynamodb:DescribeTable&#34;, &#34;dynamodb:ListBackups&#34;, &#34;dynamodb:RestoreTableFromBackup&#34;, &#34;dynamodb:CreateBackup&#34;, &#34;dynamodb:DeleteTable&#34;, &#34;dynamodb:DescribeBackup&#34;, &#34;dynamodb:DeleteBackup&#34; ], &#34;Resource&#34;: &#34;*&#34; }, { &#34;Effect&#34;: &#34;Deny&#34;, &#34;Action&#34;: [ &#34;dynamodb:DeleteTable&#34; ], &#34;Resource&#34;: &#34;arn:aws:dynamodb:ap-northeast-1:xxxxxx:table/Production*&#34; } ] } create_table する際に、 Scan~BatchWriteItem が必要 Denyで本番のDBは削除対象とし...</p>
  </section>
  <footer class="entry-footer">June 14, 2019
</footer>
  <a class="entry-link" aria-label="post link to DynamoDBでバックアップよりリストアしたい際に必要なポリシー" href="https://rengotaku.github.io/posts/45eafdc5-e37d-4568-b1e2-a498d847635e/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Minitestで&#34;No more expects available for :something_method&#34;が発生
    </h2>
  </header>
  <section class="entry-content">
    <p>誤り def test_method Rails.logger.info(&#39;one&#39;) Rails.logger.info(&#39;two&#39;) #&lt;= raise end logger_mock = Minitest::Mock.new info_mock = logger_mock.expect(:info, true, [&#39;one&#39;]) Rails.logger = logger_mock test_method &lt;= No more expects available for :info 正解 logger_mock = Minitest::Mock.new info_mock = logger_mock.expect(:info, true, [&#39;one&#39;]).expect(:info, true, [&#39;two&#39;]) Rails.logger = logger_mock ruby - Minitest: No more expects available - Stack Overflow...</p>
  </section>
  <footer class="entry-footer">June 14, 2019
</footer>
  <a class="entry-link" aria-label="post link to Minitestで&#34;No more expects available for :something_method&#34;が発生" href="https://rengotaku.github.io/posts/b3b9ba25-b8e1-4f67-b6f2-884a85b8dfc7/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      minitestで意図的にraise
    </h2>
  </header>
  <section class="entry-content">
    <p>api_mock = MiniTest::Mock.new api_mock.expect(:get, retval_get) do |args_update| raise StandardError(&#39;Mock#getで例外発生&#39;) end Rails minitest Mockで例外発生パターンのテスト - Qiita...</p>
  </section>
  <footer class="entry-footer">June 14, 2019
</footer>
  <a class="entry-link" aria-label="post link to minitestで意図的にraise" href="https://rengotaku.github.io/posts/889f9fef-5b01-475d-bc0c-104e2086a684/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      minitestでエラーメッセージを検証
    </h2>
  </header>
  <section class="entry-content">
    <p>class FooTest &lt; Minitest::Test def test_boo! # RuntimeErrorが発生することを検証 e = assert_raises RuntimeError do Foo.boo! # &lt;= boo!random-messages-continue... end # エラーメッセージを検証 assert { e.message.start_with?(&#34;boo!&#34;) } end end Minitestで例外クラ...</p>
  </section>
  <footer class="entry-footer">June 14, 2019
</footer>
  <a class="entry-link" aria-label="post link to minitestでエラーメッセージを検証" href="https://rengotaku.github.io/posts/ca10b1b5-76b1-4c89-868e-f0ee7f32be9c/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      minitestでconstをstub化
    </h2>
  </header>
  <section class="entry-content">
    <p>module Foo BAR = :original end Foo.stub_const(:BAR, :stubbed) do Foo::BAR end # =&gt; :stubbed Foo::BAR # =&gt; :original adammck/minitest-stub-const: Stub constants for the duration of a block in MiniTest...</p>
  </section>
  <footer class="entry-footer">June 14, 2019
</footer>
  <a class="entry-link" aria-label="post link to minitestでconstをstub化" href="https://rengotaku.github.io/posts/89c7127b-1494-4e7c-b613-d7156ef09fc2/"></a>
</article>
<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      DynamoDBのポリシー(policy)の一覧
    </h2>
  </header>
  <section class="entry-content">
    <p>BatchGetItem BatchWriteItem CreateBackup CreateGlobalTable CreateTable DeleteBackup DeleteItem DeleteTable DescribeBackup DescribeContinuousBackups DescribeEndpoints DescribeGlobalTable DescribeGlobalTableSettings DescribeLimits DescribeTable DescribeTimeToLive GetItem ListBackups ListGlobalTables ListTables ListTagsOfResource PutItem Query RestoreTableFromBackup RestoreTableToPointInTime Scan TagResource TransactGetItems TransactWriteItems UntagResource UpdateContinuousBackups UpdateGlobalTable UpdateGlobalTableSettings UpdateItem UpdateTable UpdateTimeToLive Amazon DynamoDB - Amazon DynamoDB...</p>
  </section>
  <footer class="entry-footer">June 13, 2019
</footer>
  <a class="entry-link" aria-label="post link to DynamoDBのポリシー(policy)の一覧" href="https://rengotaku.github.io/posts/753c85de-092b-4807-8863-27065b36d51b/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="/page/29/">« Prev Page</a>
    <a class="next" href="/page/31/">Next Page »</a>
  </nav>
</footer>

    </main><footer class="footer">
    <span>©2018-2020 Vegetable Programing.</span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top" accesskey="g">
    <button class="top-link" id="top-link" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
            <path d="M12 6H0l6-6z" /></svg>
    </button>
</a>



<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                behavior: "smooth"
            });
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
